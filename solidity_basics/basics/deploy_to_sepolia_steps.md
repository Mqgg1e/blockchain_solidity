# üöÄ Deploying a Solidity Contract to Sepolia Testnet with Foundry

This guide provides **step-by-step instructions** for deploying a smart contract to the Sepolia testnet using Foundry.

---

## üìÅ Step 1: Project Setup

Create a new Foundry project:

```bash
forge init MyProject
cd MyProject
```

---

## üßæ Step 2: Create Your `.env` File

In your project root, create a `.env` file to store **private and sensitive information**:

```env
PRIVATE_KEY=0xYOUR_PRIVATE_KEY
SEPOLIA_RPC_URL=https://sepolia.infura.io/v3/YOUR_PROJECT_ID
ETHERSCAN_API_KEY=your_etherscan_api_key (optional)
```

> ‚ö†Ô∏è Make sure your private key starts with `0x`.  
> ‚ö†Ô∏è NEVER commit this file to Git. Add it to `.gitignore`.

---

## ‚öôÔ∏è Step 3: Modify `foundry.toml`

Open `foundry.toml` and add the following line:

```toml
env = ".env"
```

This tells Foundry to load environment variables from `.env` when using `forge` commands.

---

## üß† Step 4: Write Your Contract

Create a contract in `src/Contract.sol`:

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract ContractStorage {{
    uint256 public count;

    function increment() public {{
        count++;
    }}

    function getCount() public view returns (uint256) {{
        return count;
    }}
}}
```

---

## üß™ Step 5: Compile the Contract

```bash
forge build
```

This compiles your contract and makes it ready for deployment.

---

## üßÉ Step 6: Load Environment Variables

Run this in your shell to load `.env` values into your terminal session:

```bash
source .env
```

Confirm it's loaded:

```bash
echo $SEPOLIA_RPC_URL
echo $PRIVATE_KEY
```

---

## üöÄ Step 7: Deploy the Contract

Use the contract's **name** (not filename) in this command:

```bash
forge create ContractStorage --rpc-url $SEPOLIA_RPC_URL --private-key $PRIVATE_KEY --broadcast
```

If successful, you will see the deployed contract address.

---

## üßæ (Optional) Step 8: Verify on Etherscan

If you've added your `ETHERSCAN_API_KEY`:

```bash
forge verify-contract --chain-id 11155111 <contract_address> ContractStorage $ETHERSCAN_API_KEY --watch
```

---

## ‚úÖ Summary

| Step | Description |
|------|-------------|
| 1    | `forge init` to set up project |
| 2    | Create `.env` for private keys and RPC URLs |
| 3    | Modify `foundry.toml` to load env vars |
| 4    | Write Solidity contract |
| 5    | Compile with `forge build` |
| 6    | Load `.env` with `source .env` |
| 7    | Deploy with `forge create ... --broadcast` |
| 8    | (Optional) Verify on Etherscan |

---

## My result

### Deployment

I have successfully deployed my contract.

The dry run returns:

```bash
Contract: contractStorage

Transaction: {

  "from": "0x68cc35b4fcb56f28995b70d379bbc9bb45523c2b",

  "to": null,

  "maxFeePerGas": "0xf44de",

  "maxPriorityFeePerGas": "0xf4240",

  "gas": "0x10b3e4",

  "input": "0x608060405234801561000f575f5ffd5b503360025f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600180819055505f6040518060c0016040528060015481526020013073ffffffffffffffffffffffffffffffffffffffff1681526020014281526020016040518060400160405280600d81526020017f73696d706c6553746f726167650000000000000000000000000000000000000081525081526020013373ffffffffffffffffffffffffffffffffffffffff1681526020016040518060600160405280602381526020016112f160239139815250908060018154018082558091505060019003905f5260205f2090600602015f909190919091505f820151815f01556020820151816001015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506040820151816002015560608201518160030190816101939190610434565b506080820151816004015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060a08201518160050190816101ef9190610434565b505050610503565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061027257607f821691505b6020821081036102855761028461022e565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026102e77fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826102ac565b6102f186836102ac565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f61033561033061032b84610309565b610312565b610309565b9050919050565b5f819050919050565b61034e8361031b565b61036261035a8261033c565b8484546102b8565b825550505050565b5f5f905090565b61037961036a565b610384818484610345565b505050565b5b818110156103a75761039c5f82610371565b60018101905061038a565b5050565b601f8211156103ec576103bd8161028b565b6103c68461029d565b810160208510156103d5578190505b6103e96103e18561029d565b830182610389565b50505b505050565b5f82821c905092915050565b5f61040c5f19846008026103f1565b1980831691505092915050565b5f61042483836103fd565b9150826002028217905092915050565b61043d826101f7565b67ffffffffffffffff81111561045657610455610201565b5b610460825461025b565b61046b8282856103ab565b5f60209050601f83116001811461049c575f841561048a578287015190505b6104948582610419565b8655506104fb565b601f1984166104aa8661028b565b5f5b828110156104d1578489015182556001820191506020850194506020810190506104ac565b868310156104ee57848901516104ea601f8916826103fd565b8355505b6001600288020188555050505b505050505050565b610de1806105105f395ff3fe608060405234801561000f575f5ffd5b5060043610610055575f3560e01c806306661abd14610059578063474da79a146100775780636ebc8c86146100ac5780638da5cb5b146100e1578063c08912c5146100ff575b5f5ffd5b61006161011b565b60405161006e9190610694565b60405180910390f35b610091600480360381019061008c91906106e8565b610121565b6040516100a3969594939291906107c2565b60405180910390f35b6100c660048036038101906100c191906106e8565b6102b1565b6040516100d8969594939291906107c2565b60405180910390f35b6100e961045e565b6040516100f6919061082f565b60405180910390f35b61011960048036038101906101149190610974565b610483565b005b60015481565b5f818154811061012f575f80fd5b905f5260205f2090600602015f91509050805f015490806001015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169080600201549080600301805461017f90610a17565b80601f01602080910402602001604051908101604052809291908181526020018280546101ab90610a17565b80156101f65780601f106101cd576101008083540402835291602001916101f6565b820191905f5260205f20905b8154815290600101906020018083116101d957829003601f168201915b505050505090806004015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169080600501805461023090610a17565b80601f016020809104026020016040519081016040528092919081815260200182805461025c90610a17565b80156102a75780601f1061027e576101008083540402835291602001916102a7565b820191905f5260205f20905b81548152906001019060200180831161028a57829003601f168201915b5050505050905086565b5f5f5f60605f60605f5f88815481106102cd576102cc610a47565b5b905f5260205f2090600602019050805f0154816001015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16826002015483600301846004015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff168560050182805461034090610a17565b80601f016020809104026020016040519081016040528092919081815260200182805461036c90610a17565b80156103b75780601f1061038e576101008083540402835291602001916103b7565b820191905f5260205f20905b81548152906001019060200180831161039a57829003601f168201915b505050505092508080546103ca90610a17565b80601f01602080910402602001604051908101604052809291908181526020018280546103f690610a17565b80156104415780601f1061041857610100808354040283529160200191610441565b820191905f5260205f20905b81548152906001019060200180831161042457829003601f168201915b505050505090509650965096509650965096505091939550919395565b60025f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60025f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610512576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161050990610abe565b60405180910390fd5b6001805f8282546105239190610b09565b925050819055505f6040518060c0016040528060015481526020013373ffffffffffffffffffffffffffffffffffffffff1681526020014281526020018481526020013373ffffffffffffffffffffffffffffffffffffffff16815260200183815250908060018154018082558091505060019003905f5260205f2090600602015f909190919091505f820151815f01556020820151816001015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506040820151816002015560608201518160030190816106199190610cdc565b506080820151816004015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060a08201518160050190816106759190610cdc565b5050505050565b5f819050919050565b61068e8161067c565b82525050565b5f6020820190506106a75f830184610685565b92915050565b5f604051905090565b5f5ffd5b5f5ffd5b6106c78161067c565b81146106d1575f5ffd5b50565b5f813590506106e2816106be565b92915050565b5f602082840312156106fd576106fc6106b6565b5b5f61070a848285016106d4565b91505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61073c82610713565b9050919050565b61074c81610732565b82525050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f61079482610752565b61079e818561075c565b93506107ae81856020860161076c565b6107b78161077a565b840191505092915050565b5f60c0820190506107d55f830189610685565b6107e26020830188610743565b6107ef6040830187610685565b8181036060830152610801818661078a565b90506108106080830185610743565b81810360a0830152610822818461078a565b9050979650505050505050565b5f6020820190506108425f830184610743565b92915050565b5f5ffd5b5f5ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6108868261077a565b810181811067ffffffffffffffff821117156108a5576108a4610850565b5b80604052505050565b5f6108b76106ad565b90506108c3828261087d565b919050565b5f67ffffffffffffffff8211156108e2576108e1610850565b5b6108eb8261077a565b9050602081019050919050565b828183375f83830152505050565b5f610918610913846108c8565b6108ae565b9050828152602081018484840111156109345761093361084c565b5b61093f8482856108f8565b509392505050565b5f82601f83011261095b5761095a610848565b5b813561096b848260208601610906565b91505092915050565b5f5f6040838503121561098a576109896106b6565b5b5f83013567ffffffffffffffff8111156109a7576109a66106ba565b5b6109b385828601610947565b925050602083013567ffffffffffffffff8111156109d4576109d36106ba565b5b6109e085828601610947565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680610a2e57607f821691505b602082108103610a4157610a406109ea565b5b50919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b7f4e6f7420617574686f72697a65640000000000000000000000000000000000005f82015250565b5f610aa8600e8361075c565b9150610ab382610a74565b602082019050919050565b5f6020820190508181035f830152610ad581610a9c565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610b138261067c565b9150610b1e8361067c565b9250828201905080821115610b3657610b35610adc565b5b92915050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f60088302610b987fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610b5d565b610ba28683610b5d565b95508019841693508086168417925050509392505050565b5f819050919050565b5f610bdd610bd8610bd38461067c565b610bba565b61067c565b9050919050565b5f819050919050565b610bf683610bc3565b610c0a610c0282610be4565b848454610b69565b825550505050565b5f5f905090565b610c21610c12565b610c2c818484610bed565b505050565b5b81811015610c4f57610c445f82610c19565b600181019050610c32565b5050565b601f821115610c9457610c6581610b3c565b610c6e84610b4e565b81016020851015610c7d578190505b610c91610c8985610b4e565b830182610c31565b50505b505050565b5f82821c905092915050565b5f610cb45f1984600802610c99565b1980831691505092915050565b5f610ccc8383610ca5565b9150826002028217905092915050565b610ce582610752565b67ffffffffffffffff811115610cfe57610cfd610850565b5b610d088254610a17565b610d13828285610c53565b5f60209050601f831160018114610d44575f8415610d32578287015190505b610d3c8582610cc1565b865550610da3565b601f198416610d5286610b3c565b5f5b82811015610d7957848901518255600182019150602085019450602081019050610d54565b86831015610d965784890151610d92601f891682610ca5565b8355505b6001600288020188555050505b50505050505056fea2646970667358221220c2d60e696386e99bc8c11008dfc261856ce9232e8caa5d1bf4d944b0fb1c376964736f6c634300081e0033496e697469616c206465706c6f796d656e74206f662073696d706c6553746f72616765",

  "nonce": "0x0",

  "chainId": "0xaa36a7"

}

ABI: [

  {

    "type": "constructor",

    "inputs": [],

    "stateMutability": "nonpayable"

  },

  {

    "type": "function",

    "name": "contracts",

    "inputs": [

      {

        "name": "",

        "type": "uint256",

        "internalType": "uint256"

      }

    ],

    "outputs": [

      {

        "name": "contractNumber",

        "type": "uint256",

        "internalType": "uint256"

      },

      {

        "name": "contractAddress",

        "type": "address",

        "internalType": "address"

      },

      {

        "name": "uploadDate",

        "type": "uint256",

        "internalType": "uint256"

      },

      {

        "name": "contractName",

        "type": "string",

        "internalType": "string"

      },

      {

        "name": "uploader",

        "type": "address",

        "internalType": "address"

      },

      {

        "name": "description",

        "type": "string",

        "internalType": "string"

      }

    ],

    "stateMutability": "view"

  },

  {

    "type": "function",

    "name": "count",

    "inputs": [],

    "outputs": [

      {

        "name": "",

        "type": "uint256",

        "internalType": "uint256"

      }

    ],

    "stateMutability": "view"

  },

  {

    "type": "function",

    "name": "getContract",

    "inputs": [

      {

        "name": "index",

        "type": "uint256",

        "internalType": "uint256"

      }

    ],

    "outputs": [

      {

        "name": "",

        "type": "uint256",

        "internalType": "uint256"

      },

      {

        "name": "",

        "type": "address",

        "internalType": "address"

      },

      {

        "name": "",

        "type": "uint256",

        "internalType": "uint256"

      },

      {

        "name": "",

        "type": "string",

        "internalType": "string"

      },

      {

        "name": "",

        "type": "address",

        "internalType": "address"

      },

      {

        "name": "",

        "type": "string",

        "internalType": "string"

      }

    ],

    "stateMutability": "view"

  },

  {

    "type": "function",

    "name": "incrementAndStore",

    "inputs": [

      {

        "name": "contractName",

        "type": "string",

        "internalType": "string"

      },

      {

        "name": "description",

        "type": "string",

        "internalType": "string"

      }

    ],

    "outputs": [],

    "stateMutability": "nonpayable"

  },

  {

    "type": "function",

    "name": "owner",

    "inputs": [],

    "outputs": [

      {

        "name": "",

        "type": "address",

        "internalType": "address"

      }

    ],

    "stateMutability": "view"

  }

]

```

The broadcast returns:

```bash
Deployer: 0x68CC35B4fCb56f28995b70D379BBc9bb45523c2B

Deployed to: 0xEDffF943D0eE80Ed943D4D90f76e12cFa8BC6939

Transaction hash: 0x52d8bafd1962fde136fdcf5f1f1eb61bf1804e697b211af1d3fa48cb5dbb0adb

```

### Interaction with online contract

Edit .s.sol file to interact with online contract and run:

```bash
forge script script/contractStorage.s.sol:ReadOnly --rpc-url $SEPOLIA_RPC_URL
```

